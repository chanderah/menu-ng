<div class="grid">
    <div class="col-12">
        <div class="card">
            <div class="flex align-items-center justify-content-between mb-4">
                <h5 class="category-title">Manage Orders</h5>
                <div class="flex gap-2">
                    <button
                        pButton
                        pRipple
                        class="p-button"
                        icon="pi pi-check"
                        label="Mark All as Done"
                        (click)="onStart()">
                    </button>
                </div>
            </div>

            <p-table
                #tb
                dataKey="id"
                [paginator]="true"
                [pageLinks]="3"
                [loading]="isLoading"
                [rowsPerPageOptions]="[10, 20, 50, 100]"
                [rows]="10"
                [totalRecords]="pagingInfo.rowCount"
                [lazy]="true"
                [filterDelay]="500"
                (onLazyLoad)="getOrders($event)"
                [value]="orders"
                [rowHover]="true"
                [scrollable]="true"
                scrollDirection="both"
                selectionMode="single"
                [(selection)]="selectedOrder"
                responsiveLayout="scroll">
                <ng-template pTemplate="caption">
                    <div class="flex flex-column">
                        <p class="text-right text-sm font-normal">
                            Last updated at: {{ lastUpdated | date: 'MMM d, hh:mm:ss' }}
                        </p>
                        <div class="flex justify-content-end flex-column sm:flex-row">
                            <span class="p-input-icon-left">
                                <i class="pi pi-search"></i>
                                <input
                                    pInputText
                                    type="search"
                                    (input)="tb.filterGlobal($event.target.value, 'contains')"
                                    placeholder="Search ..."
                                    class="w-full" />
                            </span>
                        </div>
                    </div>
                </ng-template>
                <ng-template pTemplate="header">
                    <tr>
                        <!-- <th style="width: 4rem"></th> -->
                        <th pSortableColumn="id"> No. <p-sortIcon field="id"></p-sortIcon> </th>
                        <th pSortableColumn="table_id"> Table <p-sortIcon field="tableId"></p-sortIcon> </th>
                        <th pSortableColumn="products">Products <p-sortIcon field="products"></p-sortIcon></th>
                        <th pSortableColumn="total_price">Price <p-sortIcon field="totalPrice"></p-sortIcon></th>
                        <th pSortableColumn="created_at">Date Created <p-sortIcon field="createdAt"></p-sortIcon></th>
                    </tr>
                </ng-template>

                <ng-template pTemplate="body" let-data let-i="rowIndex">
                    <!-- <tr [pSelectableRow]="data" class="order-done"> -->
                    <tr [pSelectableRow]="data">
                        <!-- <td style="width: 10px">
                            <p-tableCheckbox [pSelectableRow]="data" [value]="data"></p-tableCheckbox>
                        </td> -->
                        <td> {{ data.id }} </td>
                        <td style="min-width: 100px" class="text-capitalize"> Table {{ data.tableId }} </td>
                        <td style="min-width: 100px" class="text-capitalize">
                            {{ data.productsName }}
                        </td>
                        <td style="min-width: 8rem">
                            {{ data.totalPrice | custom }}
                        </td>
                        <td>
                            <p>{{ data.createdAt | date: 'MMM d, hh:mm' }}</p>
                        </td>
                    </tr>
                </ng-template>

                <ng-template pTemplate="emptymessage" let-columns>
                    <tr>
                        <td attr.colspan="100%" style="text-align: center"> No order found.</td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
</div>

<!-- <div class="grid">
    <div class="col-12">
        <div class="card">
            <h5>Live Orders</h5>
            <p-dataView
                #dv
                [value]="products"
                [paginator]="true"
                [rows]="9"
                filterBy="name"
                [sortField]="sortField"
                [sortOrder]="sortOrder"
                layout="list">
                <ng-template pTemplate="header">
                    <div class="grid grid-nogutter">
                        <div class="col-12 text-right">
                            <button
                                pButton
                                pRipple
                                icon="pi pi-check"
                                label="Mark All Done"
                                (click)="markAsDone()"
                                [disabled]="isLoading"
                                class="w-auto p-button-outlined">
                            </button>
                        </div>
                    </div>
                </ng-template>

                <ng-template let-product pTemplate="listItem">
                    <div class="col-12" style="background-color: #e0f2f1">
                        <div class="flex flex-column md:flex-row align-items-center p-3 w-full">
                            <div class="flex-1 text-center md:text-left">
                                <div class="font-bold text-2xl">92JSKU27</div>
                                <div class="mb-3">Rp. 193200</div>
                            </div>
                            <div
                                class="flex flex-row md:flex-column justify-content-between w-full md:w-auto align-items-center md:align-items-end mt-5 md:mt-0">
                                <span class="text-2xl font-semibold mb-2 align-self-center md:align-self-end">
                                    Table 7
                                </span>
                                <span [class]="'product-badge status-' + product.inventoryStatus.toLowerCase()">
                                    18 Aug, <span class="font-semibold">15.37</span>
                                </span>
                            </div>
                        </div>
                    </div>
                </ng-template>

                <ng-template let-product pTemplate="gridItem">
                    <div class="col-12 md:col-4">
                        <div class="card m-3 border-1 surface-border">
                            <div class="flex align-items-center justify-content-between">
                                <div class="flex align-items-center">
                                    <i class="pi pi-tag mr-2"></i>
                                    <span class="font-semibold">{{ product.category }}</span>
                                </div>
                                <span
                                    [class]="'sm:ml-2 product-badge status-' + product.inventoryStatus.toLowerCase()"
                                    >{{ product.inventoryStatus }}</span
                                >
                            </div>
                            <div class="text-center">
                                <img
                                    [src]="'assets/demo/images/product/' + product.image"
                                    [alt]="product.name"
                                    class="w-9 shadow-2 my-3 mx-0" />
                                <div class="text-2xl font-bold">{{ product.name }}</div>
                                <div class="mb-3">{{ product.description }}</div>
                                <p-rating [ngModel]="product.rating" [readonly]="true" [cancel]="false"></p-rating>
                            </div>
                            <div class="flex align-items-center justify-content-between">
                                <span class="text-2xl font-semibold">${{ product.price }}</span>
                                <p-button
                                    icon="pi pi-shopping-cart"
                                    [disabled]="product.inventoryStatus === 'OUTOFSTOCK'"></p-button>
                            </div>
                        </div>
                    </div>
                </ng-template>
            </p-dataView>
        </div>
    </div>
</div> -->
